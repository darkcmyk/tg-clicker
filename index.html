<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Telegram TON –ö–∞–∑–∏–Ω–æ</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #121212;
    color: #eee;
    margin: 0; padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }
  header {
    padding: 10px 0;
    width: 100%;
    background: #1f1f1f;
    text-align: center;
    font-size: 24px;
    font-weight: bold;
    color: #3affb2;
    user-select: none;
  }
  main {
    flex: 1;
    width: 100%;
    max-width: 480px;
    padding: 10px 20px;
    box-sizing: border-box;
  }
  .balance {
    font-size: 20px;
    margin: 10px 0 20px 0;
    text-align: center;
  }
  button {
    cursor: pointer;
    background: #3affb2;
    border: none;
    border-radius: 8px;
    padding: 10px 16px;
    font-weight: 700;
    font-size: 16px;
    color: #000;
    margin: 5px 5px 15px 5px;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #36d59b;
  }
  select, input[type=number] {
    font-size: 16px;
    padding: 6px;
    margin-left: 10px;
    border-radius: 6px;
    border: none;
    outline: none;
  }
  label {
    user-select: none;
  }
  .game-container {
    background: #222;
    border-radius: 12px;
    padding: 15px;
    margin-bottom: 20px;
  }
  h2 {
    margin-top: 0;
    color: #3affb2;
  }
  #history {
    max-height: 200px;
    overflow-y: auto;
    background: #1b1b1b;
    border-radius: 10px;
    padding: 10px;
    font-size: 14px;
    color: #ccc;
  }
  #history .win {
    color: #4ade80;
  }
  #history .lose {
    color: #f87171;
  }
  #admin-button {
    position: fixed;
    top: 10px;
    left: 50%;
    transform: translateX(-50%);
    background: #ff6347;
    color: #fff;
    font-weight: 700;
    padding: 10px 18px;
    border-radius: 10px;
    border: none;
    z-index: 9999;
    display: none;
  }
  #admin-panel {
    position: fixed;
    top: 50px;
    left: 50%;
    transform: translateX(-50%);
    background: #222;
    padding: 20px;
    border-radius: 12px;
    color: #eee;
    max-width: 480px;
    width: 90%;
    z-index: 9999;
    display: none;
  }
  #admin-panel h3 {
    margin-top: 0;
    color: #ff6347;
  }
  #games-tabs {
    display: flex;
    justify-content: center;
    margin-bottom: 10px;
    flex-wrap: wrap;
  }
  .tab-btn {
    background: #333;
    color: #eee;
    margin: 0 5px 10px 5px;
    border-radius: 10px;
    padding: 8px 14px;
    font-weight: 600;
    user-select: none;
    border: none;
  }
  .tab-btn.active {
    background: #3affb2;
    color: #000;
  }
  .game-content {
    background: #111;
    border-radius: 10px;
    padding: 15px;
  }
  .slot-symbols {
    font-size: 48px;
    text-align: center;
    margin: 10px 0;
  }
  .wheel-sectors {
    display: flex;
    justify-content: space-around;
    margin: 15px 0;
  }
  .sector {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: #3affb2;
    color: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    user-select: none;
  }
</style>
</head>
<body>

<header>üé∞ TON –ö–∞–∑–∏–Ω–æ (–¢–µ—Å—Ç–æ–≤–∞—è –≤–µ—Ä—Å–∏—è)</header>

<button id="admin-button">üõ† –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</button>

<div id="admin-panel">
  <h3>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>
  <button id="admin-add-balance">‚ûï –í—ã–¥–∞—Ç—å 5 TON –Ω–∞ –±–∞–ª–∞–Ω—Å (—Ñ–µ–π–∫)</button>
  <p>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å: <span id="admin-balance-display"></span> TON</p>
  <button id="admin-clear-history">üóë –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–≥—Ä</button>
</div>

<main>
  <div class="balance">–ë–∞–ª–∞–Ω—Å: <span id="balance">0.0</span> TON</div>

  <div id="games-tabs">
    <button class="tab-btn active" data-game="coin">–ú–æ–Ω–µ—Ç–∫–∞</button>
    <button class="tab-btn" data-game="slots">–°–ª–æ—Ç—ã</button>
    <button class="tab-btn" data-game="roulette">–†—É–ª–µ—Ç–∫–∞</button>
    <button class="tab-btn" data-game="dice">–ö—É–±–∏–∫</button>
    <button class="tab-btn" data-game="wheel">–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</button>
  </div>

  <div id="game-coin" class="game-content">
    <h2>–ú–æ–Ω–µ—Ç–∫–∞</h2>
    <label>–°—Ç–∞–≤–∫–∞: <input type="number" id="coin-bet" value="0.1" step="0.1" min="0.1" max="100" /></label><br/><br/>
    <label>–í—ã–±–µ—Ä–∏—Ç–µ: 
      <select id="coin-choice">
        <option value="heads">–û—Ä—ë–ª</option>
        <option value="tails">–†–µ—à–∫–∞</option>
      </select>
    </label><br/><br/>
    <button id="coin-play">–ò–≥—Ä–∞—Ç—å</button>
  </div>

  <div id="game-slots" class="game-content" style="display:none;">
    <h2>–°–ª–æ—Ç—ã</h2>
    <label>–°—Ç–∞–≤–∫–∞: <input type="number" id="slots-bet" value="0.1" step="0.1" min="0.1" max="100" /></label><br/><br/>
    <div class="slot-symbols" id="slots-result">üçí üçã üçâ</div>
    <button id="slots-play">–ò–≥—Ä–∞—Ç—å</button>
  </div>

  <div id="game-roulette" class="game-content" style="display:none;">
    <h2>–†—É–ª–µ—Ç–∫–∞</h2>
    <label>–°—Ç–∞–≤–∫–∞: <input type="number" id="roulette-bet" value="0.1" step="0.1" min="0.1" max="100" /></label><br/><br/>
    <label>–ß–∏—Å–ª–æ (1-12): <input type="number" id="roulette-choice" value="1" min="1" max="12" /></label><br/><br/>
    <button id="roulette-play">–ò–≥—Ä–∞—Ç—å</button>
  </div>

  <div id="game-dice" class="game-content" style="display:none;">
    <h2>–ö—É–±–∏–∫</h2>
    <label>–°—Ç–∞–≤–∫–∞: <input type="number" id="dice-bet" value="0.1" step="0.1" min="0.1" max="100" /></label><br/><br/>
    <label>–ß–∏—Å–ª–æ (1-6): <input type="number" id="dice-choice" value="1" min="1" max="6" /></label><br/><br/>
    <button id="dice-play">–ò–≥—Ä–∞—Ç—å</button>
  </div>

  <div id="game-wheel" class="game-content" style="display:none;">
    <h2>–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã</h2>
    <label>–°—Ç–∞–≤–∫–∞: <input type="number" id="wheel-bet" value="0.1" step="0.1" min="0.1" max="100" /></label><br/><br/>
    <div class="wheel-sectors">
      <div class="sector">√ó0</div>
      <div class="sector">√ó1</div>
      <div class="sector">√ó2</div>
      <div class="sector">√ó3</div>
      <div class="sector">√ó5</div>
      <div class="sector">√ó10</div>
    </div><br/>
    <button id="wheel-play">–ö—Ä—É—Ç–∏—Ç—å</button>
    <div id="wheel-result" style="margin-top:10px; font-size:18px;"></div>
  </div>

  <h2>–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä</h2>
  <div id="history"></div>
</main>

<script>
  const ownerId = 8026008937; // –¢–≤–æ–π Telegram ID

  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω–∫—É
  const user = window.Telegram?.WebApp?.initDataUnsafe?.user || {};
  if(user.id === ownerId){
    document.getElementById("admin-button").style.display = "block";
  }

  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–∞–±–æ–≤
  document.querySelectorAll(".tab-btn").forEach(btn => {
    btn.onclick = () => {
      document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
      btn.classList.add("active");
      const game = btn.dataset.game;
      document.querySelectorAll(".game-content").forEach(c => c.style.display = "none");
      document.getElementById("game-" + game).style.display = "block";
    };
  });

  // –ë–∞–ª–∞–Ω—Å –∏ –∏—Å—Ç–æ—Ä–∏—è –≤ localStorage
  function getBalance() {
    return parseFloat(localStorage.getItem("casino-balance") || "0");
  }
  function setBalance(value) {
    localStorage.setItem("casino-balance", value.toFixed(4));
  }
  function updateBalanceView() {
    document.getElementById("balance").textContent = getBalance().toFixed(4);
    if(user.id === ownerId){
      document.getElementById("admin-balance-display").textContent = getBalance().toFixed(4);
    }
  }

  function getHistory() {
    return JSON.parse(localStorage.getItem("casino-history") || "[]");
  }
  function addHistory(record) {
    const history = getHistory();
    history.unshift(record);
    if(history.length > 50) history.pop();
    localStorage.setItem("casino-history", JSON.stringify(history));
  }
  function updateHistoryView() {
    const historyEl = document.getElementById("history");
    const history = getHistory();
    if(history.length === 0) {
      historyEl.textContent = "–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞";
      return;
    }
    historyEl.innerHTML = "";
    history.forEach(h => {
      const div = document.createElement("div");
      div.className = h.win ? "win" : "lose";
      div.textContent = `[${new Date(h.date).toLocaleTimeString()}] ${h.game} ‚Äî —Å—Ç–∞–≤–∫–∞ ${h.bet} TON ‚Üí ${h.win ? "–í—ã–∏–≥—Ä—ã—à " + h.win + " TON" : "–ü—Ä–æ–∏–≥—Ä—ã—à"}`;
      historyEl.appendChild(div);
    });
  }

  // –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
  document.getElementById("admin-button").onclick = () => {
    const panel = document.getElementById("admin-panel");
    panel.style.display = panel.style.display === "none" ? "block" : "none";
  };

  document.getElementById("admin-add-balance").onclick = () => {
    let bal = getBalance();
    bal += 5;
    setBalance(bal);
    updateBalanceView();
    alert("–î–æ–±–∞–≤–ª–µ–Ω–æ 5 TON –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π –±–∞–ª–∞–Ω—Å.");
  };

  document.getElementById("admin-clear-history").onclick = () => {
    localStorage.removeItem("casino-history");
    updateHistoryView();
  };

  // –ò–≥—Ä–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

  // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞–≤–∫–∏
  function validBet(bet) {
    if(isNaN(bet)) return false;
    if(bet < 0.1) return false;
    if(bet > getBalance()) return false;
    return true;
  }

  function playGame(bet, gameName, callback){
    if(!validBet(bet)){
      alert("–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç–∞–≤–∫–∞ –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞.");
      return;
    }
    let balance = getBalance();
    balance -= bet;
    setBalance(balance);
    updateBalanceView();

    setTimeout(() => {
      const result = callback();
      // result = {win: 0/amount, msg: string}
      if(result.win > 0){
        balance += result.win;
        setBalance(balance);
        updateBalanceView();
      }
      addHistory({
        date: Date.now(),
        game: gameName,
        bet: bet,
        win: result.win,
        msg: result.msg
      });
      updateHistoryView();
      alert(result.msg);
    }, 300);
  }

  // –ú–æ–Ω–µ—Ç–∫–∞
  document.getElementById("coin-play").onclick = () => {
    const bet = parseFloat(document.getElementById("coin-bet").value);
    const choice = document.getElementById("coin-choice").value;
    playGame(bet, "–ú–æ–Ω–µ—Ç–∫–∞", () => {
      const toss = Math.random() < 0.5 ? "heads" : "tails";
      if(choice === toss) return {win: bet * 2, msg: `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏! –í—ã–ø–∞–ª ${toss === "heads" ? "–û—Ä—ë–ª" : "–†–µ—à–∫–∞"}`};
      else return {win: 0, msg: `–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏. –í—ã–ø–∞–ª ${toss === "heads" ? "–û—Ä—ë–ª" : "–†–µ—à–∫–∞"}`};
    });
  };

  // –°–ª–æ—Ç—ã
  const slotSymbols = ["üçí","üçã","üçâ","üçá","‚≠ê","üçÄ"];
  function getRandomSlot() {
    return slotSymbols[Math.floor(Math.random() * slotSymbols.length)];
  }
  document.getElementById("slots-play").onclick = () => {
    const bet = parseFloat(document.getElementById("slots-bet").value);
    playGame(bet, "–°–ª–æ—Ç—ã", () => {
      const s1 = getRandomSlot();
      const s2 = getRandomSlot();
      const s3 = getRandomSlot();
      document.getElementById("slots-result").textContent = `${s1} ${s2} ${s3}`;
      let win = 0;
      if(s1 === s2 && s2 === s3) win = bet * 5;
      else if(s1 === s2 || s2 === s3 || s1 === s3) win = bet * 2;
      if(win > 0) return {win, msg: `–í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${win.toFixed(2)} TON!`};
      else return {win: 0, msg: "–í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏."};
    });
  };

  // –†—É–ª–µ—Ç–∫–∞
  document.getElementById("roulette-play").onclick = () => {
    const bet = parseFloat(document.getElementById("roulette-bet").value);
    const choice = parseInt(document.getElementById("roulette-choice").value);
    if(choice < 1 || choice > 12){
      alert("–ß–∏—Å–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 12");
      return;
    }
    playGame(bet, "–†—É–ª–µ—Ç–∫–∞", () => {
      const resultNumber = Math.floor(Math.random() * 12) + 1;
      if(choice === resultNumber) return {win: bet * 12, msg: `–í—ã–ø–∞–ª–æ —á–∏—Å–ª–æ ${resultNumber}. –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${ (bet*12).toFixed(2)} TON!`};
      else return {win: 0, msg: `–í—ã–ø–∞–ª–æ —á–∏—Å–ª–æ ${resultNumber}. –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏.`};
    });
  };

  // –ö—É–±–∏–∫
  document.getElementById("dice-play").onclick = () => {
    const bet = parseFloat(document.getElementById("dice-bet").value);
    const choice = parseInt(document.getElementById("dice-choice").value);
    if(choice < 1 || choice > 6){
      alert("–ß–∏—Å–ª–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—Ç 1 –¥–æ 6");
      return;
    }
    playGame(bet, "–ö—É–±–∏–∫", () => {
      const resultNumber = Math.floor(Math.random() * 6) + 1;
      if(choice === resultNumber) return {win: bet * 6, msg: `–í—ã–ø–∞–ª–æ —á–∏—Å–ª–æ ${resultNumber}. –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${(bet*6).toFixed(2)} TON!`};
      else return {win: 0, msg: `–í—ã–ø–∞–ª–æ —á–∏—Å–ª–æ ${resultNumber}. –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏.`};
    });
  };

  // –ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã
  const wheelMultipliers = [0,1,2,3,5,10];
  document.getElementById("wheel-play").onclick = () => {
    const bet = parseFloat(document.getElementById("wheel-bet").value);
    playGame(bet, "–ö–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã", () => {
      const idx = Math.floor(Math.random() * wheelMultipliers.length);
      const mult = wheelMultipliers[idx];
      document.getElementById("wheel-result").textContent = `–í—ã–ø–∞–ª–æ √ó${mult}`;
      if(mult === 0) return {win: 0, msg: "–£–ø—Å! –í—ã –ø—Ä–æ–∏–≥—Ä–∞–ª–∏."};
      else return {win: bet * mult, msg: `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–∏–≥—Ä–∞–ª–∏ ${(bet*mult).toFixed(2)} TON.`};
    });
  };

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
  updateBalanceView();
  updateHistoryView();

</script>

</body>
</html>
